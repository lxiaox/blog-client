"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _auth=_interopRequireDefault(require("@/api/auth"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var state={user:null,isLogin:!1},getters={user:function(e){return e.user},isLogin:function(e){return e.isLogin}},mutations={setUser:function(e,t){e.user=t.user},setIsLogin:function(e,t){e.isLogin=t.isLogin}},actions={login:function(t,r){var n,s,a,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commit,s=r.username,a=r.password,e.next=4,regeneratorRuntime.awrap(_auth.default.login({username:s,password:a}));case 4:return u=e.sent,n("setUser",{user:u.data}),n("setIsLogin",{isLogin:!0}),e.abrupt("return",u.data);case 8:case"end":return e.stop()}})},logout:function(t){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,regeneratorRuntime.awrap(_auth.default.logout());case 3:r("setUser",{user:null}),r("setIsLogin",{isLogin:!1});case 5:case"end":return e.stop()}})},register:function(t,r){var n,s,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t.commit,n=r.username,s=r.password,e.next=4,regeneratorRuntime.awrap(_auth.default.register({username:n,password:s}));case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}})},checkLogin:function(t){var r,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.commit,t.state.isLogin)return e.abrupt("return",!0);e.next=3;break;case 3:return e.next=5,regeneratorRuntime.awrap(_auth.default.getInfo());case 5:if(n=e.sent,r("setIsLogin",{isLogin:n.isLogin}),n.isLogin){e.next=9;break}return e.abrupt("return",!1);case 9:return r("setUser",{user:n.data}),e.abrupt("return",!0);case 11:case"end":return e.stop()}})}},_default={state:state,getters:getters,mutations:mutations,actions:actions};exports.default=_default;